jQuery(document).ready(function(c){var h=c("table.gp-table.translation-sets");var g=gpToolboxProject.admin;var d=gpToolboxProject.gp_url_project;var f=gpToolboxProject.args.project;var e="gptoolboxdata-";if(h.length){c(h).children("thead").children("tr").find("th.gp-column-waiting").after('<th class="gptoolbox-column-old">'+wp.i18n.__("Old","gp-toolbox")+"</td>");c(h).children("thead").children("tr").find("th.gptoolbox-column-old").after('<th class="gptoolbox-column-rejected">'+wp.i18n.__("Rejected","gp-toolbox")+"</td>");c(h).children("tbody").children("tr").each(function(){c(this).find("td.stats.waiting").after('<td class="stats old"></td>');c(this).find("td.stats.old").after('<td class="stats rejected"></td>');c(this).children("td:first-child").find("a").each(function(){var l=new RegExp("^"+d+".*"+f.path+"/(.*)/(.*)/$");var k=c(this).attr("href").match(l);var i=k[1];var j=k[2];c(this).closest("tr").attr(e+"locale",i);c(this).closest("tr").attr(e+"slug",j);c(this).closest("tr").attr(e+"projectpath",f.path)})});c(h).children("tbody").children("tr").each(function(){var i=c(this).attr("gptoolboxdata-locale");var l=gpToolboxProject.args.translation_sets[i];var k=c(this).children("td:first-child").find("a").attr("href");var j=c(this).children("td.stats.old");var m=c(this).children("td.stats.rejected");c(this).find("td.stats.old").html('<div><a class="count" href="'+k+'?filters[status]=old">'+l.old_count+"</a></div>");c(this).find("td.stats.rejected").html('<div><a class="count" href="'+k+'?filters[status]=rejected">'+l.rejected_count+"</a></div>");if(g){c(j).find("div a.count").after('<button class="delete hidden" disabled><span class="dashicons dashicons-trash"></span></button>');c(m).find("div a.count").after('<button class="delete hidden" disabled><span class="dashicons dashicons-trash"></span></button></div>');if(c(j).find("div a.count").text().trim()!=="0"){c(j).addClass("highlight");c(j).find("div button.delete").attr("disabled",false).removeClass("hidden")}if(c(m).find("div a.count").text().trim()!=="0"){c(m).addClass("highlight");c(m).find("div button.delete").attr("disabled",false).removeClass("hidden")}c(j).find("div button.delete").on("click",function(){a(l.locale,l.slug,"old")});c(m).find("div button.delete").on("click",function(){a(l.locale,l.slug,"rejected")})}});b()}function a(i,k,j){var l=c(h).find("tbody tr["+e+'locale="'+i+'"]['+e+'slug="'+k+'"] td.stats.'+j+" div button.delete");console.log('Clicked to delete translations on project "'+f.path+'" locale "'+i+"/"+k+'" and status "'+j+'"');c.ajax({url:gpToolboxProject.ajaxurl,type:"POST",data:{action:"delete_translations",projectPath:f.path,locale:i,slug:k,status:j,nonce:gpToolboxProject.nonce,},beforeSend:function(){console.log("Ajax request is starting...");l.attr("disabled",true)},}).done(function(n,q,o){var m=n.data.old;var p=n.data.rejected;if(c(l).closest("td").hasClass("old")){c(m).closest("td").removeClass("highlight");l.closest("div").children("a").text(m);l.addClass("hidden")}if(c(l).closest("td").hasClass("rejected")){c(p).closest("td").removeClass("highlight");l.closest("div").children("a").text(p);l.addClass("hidden")}b(l.closest("td"));console.log("Ajax request has been completed ("+q+"). Status: "+o.status+" "+o.statusText);console.log(n);console.log(q);console.log(o)}).fail(function(m,n){console.log("Ajax request has failed ("+n+"). Status: "+m.status+" "+m.statusText)}).always(function(){console.log("Ajax end.")})}function b(i){var j=0;if(i){j=c(i).find("a").text();if(j==="0"){c(i).removeClass("highlight")}else{c(i).addClass("highlight")}}else{c(h).find("td.stats").each(function(){j=c(this).find("a").text();if(j==="0"){c(this).removeClass("highlight")}else{c(this).addClass("highlight")}})}}});