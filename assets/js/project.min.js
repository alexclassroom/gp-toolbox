jQuery(document).ready(function($){var tableTranslationSets=$("table.gp-table.translation-sets"),glotpressAdmin=gpToolboxProject.admin,gpUrlProject=gpToolboxProject.gp_url_project,project=gpToolboxProject.args.project,dataPrefix="gptoolboxdata-";function deleteTranslations(locale,slug,status){var button=$(tableTranslationSets).find('tbody tr[gptoolboxdata-locale="'+locale+'"]['+dataPrefix+'slug="'+slug+'"] td.stats.'+status+" div button.delete");$.ajax({url:gpToolboxProject.ajaxurl,type:"POST",data:{action:"delete_translations",projectPath:project.path,locale:locale,slug:slug,status:status,nonce:gpToolboxProject.nonce},beforeSend:function(){button.attr("disabled",!0)}}).done(function(response,textStatus,jqXHR){var old=response.data.old,response=response.data.response;$(button).closest("td").hasClass("old")&&button.closest("div").children("a").text(old),$(button).closest("td").hasClass("rejected")&&button.closest("div").children("a").text(response)}).fail(function(jqXHR,textStatus){}).always(function(){})}tableTranslationSets.length&&($(tableTranslationSets).children("thead").children("tr").find("th.gp-column-waiting").after('<th class="gptoolbox-column-old">'+wp.i18n.__("Old","gp-toolbox")+"</td>"),$(tableTranslationSets).children("thead").children("tr").find("th.gptoolbox-column-old").after('<th class="gptoolbox-column-rejected">'+wp.i18n.__("Rejected","gp-toolbox")+"</td>"),$(tableTranslationSets).children("tbody").children("tr").each(function(){$(this).find("td.stats.waiting").after('<td class="stats old"></td>'),$(this).find("td.stats.old").after('<td class="stats rejected"></td>'),$(this).children("td:first-child").find("a").each(function(){var regexPattern=new RegExp("^"+gpUrlProject+".*"+project.path+"/(.*)/(.*)/$"),regexPattern=$(this).attr("href").match(regexPattern),locale=regexPattern[1],regexPattern=regexPattern[2];$(this).closest("tr").attr(dataPrefix+"locale",locale),$(this).closest("tr").attr(dataPrefix+"slug",regexPattern),$(this).closest("tr").attr(dataPrefix+"projectpath",project.path)})}),$(tableTranslationSets).children("tbody").children("tr").each(function(){var locale=$(this).attr("gptoolboxdata-locale"),translationSet=gpToolboxProject.args.translation_sets[locale],locale=$(this).children("td:first-child").find("a").attr("href"),old=$(this).children("td.stats.old"),rejected=$(this).children("td.stats.rejected");$(this).find("td.stats.old").html('<div><a class="count" href="'+locale+'?filters[status]=old">'+translationSet.old_count+"</a></div>"),$(this).find("td.stats.rejected").html('<div><a class="count" href="'+locale+'?filters[status]=rejected">'+translationSet.rejected_count+"</a></div>"),glotpressAdmin&&($(old).find("div a.count").after('<button class="delete" disabled><span class="dashicons dashicons-trash"></span></button>'),$(rejected).find("div a.count").after('<button class="delete" disabled><span class="dashicons dashicons-trash"></span></button></div>'),"0"!==$(old).find("div a.count").text().trim()&&$(old).find("div button.delete").attr("disabled",!1),"0"!==$(rejected).find("div a.count").text().trim()&&$(rejected).find("div button.delete").attr("disabled",!1),$(old).find("div button.delete").on("click",function(){deleteTranslations(translationSet.locale,translationSet.slug,"old")}),$(rejected).find("div button.delete").on("click",function(){deleteTranslations(translationSet.locale,translationSet.slug,"rejected")}))}))});