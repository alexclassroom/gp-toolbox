jQuery(document).ready(function($){var userLogin=gpToolboxTools.user_login,userLocale=gpToolboxTools.user_locale,tablePermissionAdmin=$("table.gp-table.permission-admin"),tablePermissionValidator=$("table.gp-table.permission-validator"),glotpressAdmin=gpToolboxTools.admin;function permissionDelete(permissionType,permissionID){var tr=$("table.gp-toolbox.permission-"+permissionType).find('tbody tr[gptoolboxdata-permission="'+permissionID+'"]'),td=$(tr).find("td.action"),notice=$(td).find("div.progress-notice"),button=$(td).find("button.delete"),td=$(td).find("span.duplicate");$(button).hide().attr("disabled",!0),$(td).hide(),$(notice).text(wp.i18n.__("Deleting...","gp-toolbox")).fadeIn(),$.ajax({url:wpApiSettings.root+"gp-toolbox/v1/permissions/"+permissionID+"/-delete",type:"POST",data:{_wpnonce:gpToolboxTools.nonce},success:function(response){var permissionsCount=$("p#permission-"+permissionType+"-count span.count").text();!0===response.deleted?($(tr).fadeOut(),0<(permissionsCount-=1)?$("p#permission-"+permissionType+"-count").html(sprintf(wp.i18n._n("%s Permission found.","%s Permissions found.",permissionsCount,"gp-toolbox"),'<span class="count">'+new Intl.NumberFormat(userLocale.slug).format(permissionsCount)+"</span>")):($("p#permission-"+permissionType+"-count").text(wp.i18n.__("No permissions found.","gp-toolbox")),$("div.permission-"+permissionType+"-filter").fadeOut(),$("table.gp-toolbox.permission-"+permissionType).fadeOut())):($(notice).hide().text(""),$(notice).text(wp.i18n.sprintf(wp.i18n.__("Error: %s","gp-toolbox"),response.message)),$(notice).fadeIn())},error:function(response){},complete:function(){}})}tablePermissionAdmin.length&&$(tablePermissionAdmin).children("tbody").children("tr").each(function(){var permissionID=$(this).attr("gptoolboxdata-permission");glotpressAdmin&&($(this).find("td.user").text().trim()===userLogin?$(this).find("td.action button.delete").attr("disabled",!0):$(this).find("td.action button.delete").on("click",function(){permissionDelete("admin",permissionID)}))}),tablePermissionValidator.length&&$(tablePermissionValidator).children("tbody").children("tr").each(function(){var permissionID=$(this).attr("gptoolboxdata-permission");glotpressAdmin&&$(this).find("td.action button.delete").on("click",function(){permissionDelete("validator",permissionID)})})});